{"version":3,"file":"JSONFilterBarDelegate.js","names":["JSONPropertyInfo","_interopRequireDefault","__JSONPropertyInfo","JSONBaseDelegate","__JSONBaseDelegate","JSONFilterBarDelegate","Object","assign","FilterBarDelegate","fetchProperties","async","_createValueHelp","filterBar","propertyKey","path","valueHelp","Fragment","load","name","getPayload","addDependent","_createFilterField","id","property","key","filterField","FilterField","dataType","conditions","required","label","maxConditions","delegate","payload","dependents","getDependents","find","dependent","getId","includes","setValueHelp","addItem","p","Element","getElementById"],"sources":["JSONFilterBarDelegate.ts"],"sourcesContent":["import FilterBarDelegate from \"sap/ui/mdc/FilterBarDelegate\"\nimport JSONPropertyInfo from \"mdc/tutorial/model/metadata/JSONPropertyInfo\"\nimport FilterField from \"sap/ui/mdc/FilterField\"\nimport Element from \"sap/ui/core/Element\"\nimport {default as FilterBar, PropertyInfo as FilterBarPropertyInfo} from \"sap/ui/mdc/FilterBar\"\nimport Fragment from \"sap/ui/core/Fragment\"\nimport ValueHelp from \"sap/ui/mdc/ValueHelp\"\nimport JSONBaseDelegate from \"./JSONBaseDelegate\"\n\ninterface FilterBarPayload {\n\tvalueHelp: {\n\t\t[key:string]: string\n\t}\n}\n\nvar JSONFilterBarDelegate = Object.assign({}, FilterBarDelegate, JSONBaseDelegate)\n\nJSONFilterBarDelegate.fetchProperties = async () => JSONPropertyInfo\n\nconst _createValueHelp = async (filterBar:FilterBar, propertyKey:string) => {\n\tconst path = \"mdc.tutorial.view.fragment.\"\n\tconst valueHelp = await Fragment.load({\n\t\tname: path + (filterBar.getPayload() as FilterBarPayload).valueHelp[propertyKey]\n\t}) as unknown as ValueHelp\n\tfilterBar.addDependent(valueHelp)\n\treturn valueHelp\n}\n\nconst _createFilterField = async (id:string, property:FilterBarPropertyInfo, filterBar:FilterBar) => {\n\tconst propertyKey = property.key\n\tconst filterField = new FilterField(id, {\n\t\tdataType: property.dataType,\n\t\tconditions: `{$filters>/conditions/${propertyKey}}`,\n\t\tpropertyKey: propertyKey,\n\t\trequired: property.required,\n\t\tlabel: property.label,\n\t\tmaxConditions: property.maxConditions,\n\t\tdelegate: {name: \"sap/ui/mdc/field/FieldBaseDelegate\", payload: {}}\n\t})\n\tif ((filterBar.getPayload() as FilterBarPayload).valueHelp[propertyKey] ) {\n\t\tconst dependents = filterBar.getDependents()\n\t\tlet valueHelp = dependents.find((dependent) => dependent.getId().includes(propertyKey)) as ValueHelp\n\t\tvalueHelp ??= await _createValueHelp(filterBar, propertyKey)\n\t\tfilterField.setValueHelp(valueHelp)\n\t}\n\treturn filterField\n}\n\nJSONFilterBarDelegate.addItem = async (filterBar:FilterBar, propertyKey:string) => {\n\tconst property = JSONPropertyInfo.find((p) => p.key === propertyKey) as FilterBarPropertyInfo\n\tconst id = `${filterBar.getId()}--filter--${propertyKey}`\n\tconst filterField = Element.getElementById(id) as FilterField\n\treturn filterField ?? _createFilterField(id, property, filterBar)\n}\n\nexport default JSONFilterBarDelegate"],"mappings":"mTACOA,EAAgBC,EAAAC,GAAA,MAMhBC,EAAgBF,EAAAG,GAQvB,IAAIC,EAAwBC,OAAOC,OAAO,CAAC,EAAGC,EAAmBL,GAEjEE,EAAsBI,gBAAkBC,SAAYV,EAEpD,MAAMW,EAAmBD,MAAOE,EAAqBC,KACpD,MAAMC,EAAO,8BACb,MAAMC,QAAkBC,EAASC,KAAK,CACrCC,KAAMJ,EAAQF,EAAUO,aAAkCJ,UAAUF,KAErED,EAAUQ,aAAaL,GACvB,OAAOA,CAAS,EAGjB,MAAMM,EAAqBX,MAAOY,EAAWC,EAAgCX,KAC5E,MAAMC,EAAcU,EAASC,IAC7B,MAAMC,EAAc,IAAIC,EAAYJ,EAAI,CACvCK,SAAUJ,EAASI,SACnBC,WAAY,yBAAyBf,KACrCA,YAAaA,EACbgB,SAAUN,EAASM,SACnBC,MAAOP,EAASO,MAChBC,cAAeR,EAASQ,cACxBC,SAAU,CAACd,KAAM,qCAAsCe,QAAS,CAAC,KAElE,GAAKrB,EAAUO,aAAkCJ,UAAUF,GAAe,CACzE,MAAMqB,EAAatB,EAAUuB,gBAC7B,IAAIpB,EAAYmB,EAAWE,KAAMC,GAAcA,EAAUC,QAAQC,SAAS1B,IAC1EE,UAAoBJ,EAAiBC,EAAWC,GAChDY,EAAYe,aAAazB,EAC1B,CACA,OAAOU,CAAW,EAGnBpB,EAAsBoC,QAAU/B,MAAOE,EAAqBC,KAC3D,MAAMU,EAAWvB,EAAiBoC,KAAMM,GAAMA,EAAElB,MAAQX,GACxD,MAAMS,EAAK,GAAGV,EAAU0B,oBAAoBzB,IAC5C,MAAMY,EAAckB,EAAQC,eAAetB,GAC3C,OAAOG,GAAeJ,EAAmBC,EAAIC,EAAUX,EAAU,EACjE,OAEcP,CAAqB","ignoreList":[]}