{"version":3,"file":"JSONTableDelegate.js","names":["JSONPropertyInfo","_interopRequireDefault","__JSONPropertyInfo","JSONBaseDelegate","__JSONBaseDelegate","JSONTableDelegate","Object","assign","TableDelegate","fetchProperties","async","filter","p","key","_createColumn","propertyInfo","table","name","id","getId","column","Element","getElementById","Column","propertyKey","header","label","template","Text","text","path","type","dataType","addItem","find","updateBindingInfo","bindingInfo","call","getPayload","bindingPath","templateShareable","_createSearchFilters","search","keys","filters","map","Filter","operator","FilterOperator","Contains","value1","getFilters","getFilter","getSearch","searchKeys","concat"],"sources":["JSONTableDelegate.ts"],"sourcesContent":["import TableDelegate from \"sap/ui/mdc/TableDelegate\"\nimport Text from \"sap/m/Text\"\nimport Element from \"sap/ui/core/Element\"\nimport JSONPropertyInfo from \"mdc/tutorial/model/metadata/JSONPropertyInfo\"\nimport {default as Table, PropertyInfo as TablePropertyInfo} from \"sap/ui/mdc/Table\"\nimport Column from \"sap/ui/mdc/table/Column\"\nimport Filter from \"sap/ui/model/Filter\"\nimport FilterOperator from \"sap/ui/model/FilterOperator\"\nimport FilterBar from \"sap/ui/mdc/FilterBar\"\nimport JSONBaseDelegate from \"./JSONBaseDelegate\"\n\ninterface TablePayload {\n\tbindingPath: string\n\tsearchKeys: string[]\n}\n\nconst JSONTableDelegate = Object.assign({}, TableDelegate, JSONBaseDelegate)\n\nJSONTableDelegate.fetchProperties = async () => {\n\treturn JSONPropertyInfo.filter((p) => p.key !== \"$search\")\n}\n\nconst _createColumn = (propertyInfo:TablePropertyInfo, table:Table) => {\n\tconst name = propertyInfo.key\n\tconst id = table.getId() + \"---col-\" + name\n\tconst column = Element.getElementById(id) as Column\n\treturn column ?? new Column(id, {\n\t\tpropertyKey: name,\n\t\theader: propertyInfo.label,\n\t\ttemplate: new Text({\n\t\t\ttext: {\n\t\t\t\tpath: \"mountains>\" + name,\n\t\t\t\ttype: propertyInfo.dataType\n\t\t\t}\n\t\t})\n\t})\n}\n\nJSONTableDelegate.addItem = async (table:Table, propertyKey:string) => {\n\tconst propertyInfo = JSONPropertyInfo.find((p) => p.key === propertyKey)\n\treturn _createColumn(propertyInfo, table)\n}\n\nJSONTableDelegate.updateBindingInfo = (table, bindingInfo) => {\n\tTableDelegate.updateBindingInfo.call(JSONTableDelegate, table, bindingInfo)\n\tbindingInfo.path = (table.getPayload() as TablePayload).bindingPath\n\tbindingInfo.templateShareable = true\n}\n\nconst _createSearchFilters = (search:string, keys:string[]) => {\n\tconst filters = keys.map((key) => new Filter({\n\t\tpath: key,\n\t\toperator: FilterOperator.Contains,\n\t\tvalue1: search\n\t}))\n\treturn [new Filter(filters, false)]\n}\n\nJSONTableDelegate.getFilters = (table) => {\n\tconst search = (Element.getElementById(table.getFilter()) as FilterBar).getSearch()\n\tconst keys = (table.getPayload() as TablePayload).searchKeys\n\tlet filters = TableDelegate.getFilters(table)\n\tif (search && keys) {\n\t\tfilters = filters.concat(_createSearchFilters(search, keys))\n\t}\n\treturn filters\n}\n\nexport default JSONTableDelegate"],"mappings":"2WAGOA,EAAgBC,EAAAC,GAAA,MAMhBC,EAAgBF,EAAAG,GAOvB,MAAMC,EAAoBC,OAAOC,OAAO,CAAC,EAAGC,EAAeL,GAE3DE,EAAkBI,gBAAkBC,SAC5BV,EAAiBW,OAAQC,GAAMA,EAAEC,MAAQ,WAGjD,MAAMC,EAAgBA,CAACC,EAAgCC,KACtD,MAAMC,EAAOF,EAAaF,IAC1B,MAAMK,EAAKF,EAAMG,QAAU,UAAYF,EACvC,MAAMG,EAASC,EAAQC,eAAeJ,GACtC,OAAOE,GAAU,IAAIG,EAAOL,EAAI,CAC/BM,YAAaP,EACbQ,OAAQV,EAAaW,MACrBC,SAAU,IAAIC,EAAK,CAClBC,KAAM,CACLC,KAAM,aAAeb,EACrBc,KAAMhB,EAAaiB,aAGpB,EAGH3B,EAAkB4B,QAAUvB,MAAOM,EAAaQ,KAC/C,MAAMT,EAAef,EAAiBkC,KAAMtB,GAAMA,EAAEC,MAAQW,GAC5D,OAAOV,EAAcC,EAAcC,EAAM,EAG1CX,EAAkB8B,kBAAoB,CAACnB,EAAOoB,KAC7C5B,EAAc2B,kBAAkBE,KAAKhC,EAAmBW,EAAOoB,GAC/DA,EAAYN,KAAQd,EAAMsB,aAA8BC,YACxDH,EAAYI,kBAAoB,IAAI,EAGrC,MAAMC,EAAuBA,CAACC,EAAeC,KAC5C,MAAMC,EAAUD,EAAKE,IAAKhC,GAAQ,IAAIiC,EAAO,CAC5ChB,KAAMjB,EACNkC,SAAUC,EAAeC,SACzBC,OAAQR,KAET,MAAO,CAAC,IAAII,EAAOF,EAAS,OAAO,EAGpCvC,EAAkB8C,WAAcnC,IAC/B,MAAM0B,EAAUrB,EAAQC,eAAeN,EAAMoC,aAA2BC,YACxE,MAAMV,EAAQ3B,EAAMsB,aAA8BgB,WAClD,IAAIV,EAAUpC,EAAc2C,WAAWnC,GACvC,GAAI0B,GAAUC,EAAM,CACnBC,EAAUA,EAAQW,OAAOd,EAAqBC,EAAQC,GACvD,CACA,OAAOC,CAAO,EACd,OAEcvC,CAAiB","ignoreList":[]}