{"version":3,"file":"JSONTableDelegate-dbg.js","names":["JSONPropertyInfo","_interopRequireDefault","__JSONPropertyInfo","JSONTableDelegate","Object","assign","TableDelegate","fetchProperties","filter","p","key","_createColumn","propertyInfo","table","name","id","getId","column","Element","getElementById","Column","propertyKey","header","label","template","Text","text","path","type","dataType","addItem","find","updateBindingInfo","bindingInfo","call","getPayload","bindingPath","templateShareable","_createSearchFilters","search","keys","filters","map","Filter","operator","FilterOperator","Contains","value1","getFilters","getFilter","getSearch","searchKeys","concat"],"sources":["JSONTableDelegate.ts"],"sourcesContent":["import TableDelegate from \"sap/ui/mdc/TableDelegate\"\nimport Text from \"sap/m/Text\"\nimport Element from \"sap/ui/core/Element\"\nimport JSONPropertyInfo from \"mdc/tutorial/model/metadata/JSONPropertyInfo\"\nimport {default as Table, PropertyInfo as TablePropertyInfo} from \"sap/ui/mdc/Table\"\nimport Column from \"sap/ui/mdc/table/Column\"\nimport Filter from \"sap/ui/model/Filter\"\nimport FilterOperator from \"sap/ui/model/FilterOperator\"\nimport FilterBar from \"sap/ui/mdc/FilterBar\"\ninterface TablePayload {\n\tbindingPath: string\n\tsearchKeys: string[]\n}\n\nconst JSONTableDelegate = Object.assign({}, TableDelegate)\n\nJSONTableDelegate.fetchProperties = async () => {\n\treturn JSONPropertyInfo.filter((p) => p.key !== \"$search\")\n}\n\nconst _createColumn = (propertyInfo:TablePropertyInfo, table:Table) => {\n\tconst name = propertyInfo.key\n\tconst id = table.getId() + \"---col-\" + name\n\tconst column = Element.getElementById(id) as Column\n\treturn column ?? new Column(id, {\n\t\tpropertyKey: name,\n\t\theader: propertyInfo.label,\n\t\ttemplate: new Text({\n\t\t\ttext: {\n\t\t\t\tpath: \"mountains>\" + name,\n\t\t\t\ttype: propertyInfo.dataType\n\t\t\t}\n\t\t})\n\t})\n}\n\nJSONTableDelegate.addItem = async (table:Table, propertyKey:string) => {\n\tconst propertyInfo = JSONPropertyInfo.find((p) => p.key === propertyKey)\n\treturn _createColumn(propertyInfo, table)\n}\n\nJSONTableDelegate.updateBindingInfo = (table, bindingInfo) => {\n\tTableDelegate.updateBindingInfo.call(JSONTableDelegate, table, bindingInfo)\n\tbindingInfo.path = (table.getPayload() as TablePayload).bindingPath\n\tbindingInfo.templateShareable = true\n}\n\nconst _createSearchFilters = (search:string, keys:string[]) => {\n\tconst filters = keys.map((key) => new Filter({\n\t\tpath: key,\n\t\toperator: FilterOperator.Contains,\n\t\tvalue1: search\n\t}))\n\treturn [new Filter(filters, false)]\n}\n\nJSONTableDelegate.getFilters = (table) => {\n\tconst search = (Element.getElementById(table.getFilter()) as FilterBar).getSearch()\n\tconst keys = (table.getPayload() as TablePayload).searchKeys\n\tlet filters = TableDelegate.getFilters(table)\n\tif (search && keys) {\n\t\tfilters = filters.concat(_createSearchFilters(search, keys))\n\t}\n\treturn filters\n}\n\nexport default JSONTableDelegate"],"mappings":";;;;;;QAGOA,gBAAgB,GAAAC,sBAAA,CAAAC,kBAAA;EAWvB,MAAMC,iBAAiB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,aAAa,CAAC;EAE1DH,iBAAiB,CAACI,eAAe,GAAG,YAAY;IAC/C,OAAOP,gBAAgB,CAACQ,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,GAAG,KAAK,SAAS,CAAC;EAC3D,CAAC;EAED,MAAMC,aAAa,GAAGA,CAACC,YAA8B,EAAEC,KAAW,KAAK;IACtE,MAAMC,IAAI,GAAGF,YAAY,CAACF,GAAG;IAC7B,MAAMK,EAAE,GAAGF,KAAK,CAACG,KAAK,CAAC,CAAC,GAAG,SAAS,GAAGF,IAAI;IAC3C,MAAMG,MAAM,GAAGC,OAAO,CAACC,cAAc,CAACJ,EAAE,CAAW;IACnD,OAAOE,MAAM,IAAI,IAAIG,MAAM,CAACL,EAAE,EAAE;MAC/BM,WAAW,EAAEP,IAAI;MACjBQ,MAAM,EAAEV,YAAY,CAACW,KAAK;MAC1BC,QAAQ,EAAE,IAAIC,IAAI,CAAC;QAClBC,IAAI,EAAE;UACLC,IAAI,EAAE,YAAY,GAAGb,IAAI;UACzBc,IAAI,EAAEhB,YAAY,CAACiB;QACpB;MACD,CAAC;IACF,CAAC,CAAC;EACH,CAAC;EAED1B,iBAAiB,CAAC2B,OAAO,GAAG,OAAOjB,KAAW,EAAEQ,WAAkB,KAAK;IACtE,MAAMT,YAAY,GAAGZ,gBAAgB,CAAC+B,IAAI,CAAEtB,CAAC,IAAKA,CAAC,CAACC,GAAG,KAAKW,WAAW,CAAC;IACxE,OAAOV,aAAa,CAACC,YAAY,EAAEC,KAAK,CAAC;EAC1C,CAAC;EAEDV,iBAAiB,CAAC6B,iBAAiB,GAAG,CAACnB,KAAK,EAAEoB,WAAW,KAAK;IAC7D3B,aAAa,CAAC0B,iBAAiB,CAACE,IAAI,CAAC/B,iBAAiB,EAAEU,KAAK,EAAEoB,WAAW,CAAC;IAC3EA,WAAW,CAACN,IAAI,GAAId,KAAK,CAACsB,UAAU,CAAC,CAAC,CAAkBC,WAAW;IACnEH,WAAW,CAACI,iBAAiB,GAAG,IAAI;EACrC,CAAC;EAED,MAAMC,oBAAoB,GAAGA,CAACC,MAAa,EAAEC,IAAa,KAAK;IAC9D,MAAMC,OAAO,GAAGD,IAAI,CAACE,GAAG,CAAEhC,GAAG,IAAK,IAAIiC,MAAM,CAAC;MAC5ChB,IAAI,EAAEjB,GAAG;MACTkC,QAAQ,EAAEC,cAAc,CAACC,QAAQ;MACjCC,MAAM,EAAER;IACT,CAAC,CAAC,CAAC;IACH,OAAO,CAAC,IAAII,MAAM,CAACF,OAAO,EAAE,KAAK,CAAC,CAAC;EACpC,CAAC;EAEDtC,iBAAiB,CAAC6C,UAAU,GAAInC,KAAK,IAAK;IACzC,MAAM0B,MAAM,GAAIrB,OAAO,CAACC,cAAc,CAACN,KAAK,CAACoC,SAAS,CAAC,CAAC,CAAC,CAAeC,SAAS,CAAC,CAAC;IACnF,MAAMV,IAAI,GAAI3B,KAAK,CAACsB,UAAU,CAAC,CAAC,CAAkBgB,UAAU;IAC5D,IAAIV,OAAO,GAAGnC,aAAa,CAAC0C,UAAU,CAACnC,KAAK,CAAC;IAC7C,IAAI0B,MAAM,IAAIC,IAAI,EAAE;MACnBC,OAAO,GAAGA,OAAO,CAACW,MAAM,CAACd,oBAAoB,CAACC,MAAM,EAAEC,IAAI,CAAC,CAAC;IAC7D;IACA,OAAOC,OAAO;EACf,CAAC;EAAA,OAEctC,iBAAiB;AAAA","ignoreList":[]}