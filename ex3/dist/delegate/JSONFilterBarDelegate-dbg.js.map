{"version":3,"file":"JSONFilterBarDelegate-dbg.js","names":["JSONPropertyInfo","_interopRequireDefault","__JSONPropertyInfo","JSONFilterBarDelegate","Object","assign","FilterBarDelegate","fetchProperties","_createValueHelp","filterBar","propertyKey","path","valueHelp","Fragment","load","name","getPayload","addDependent","_createFilterField","id","property","key","filterField","FilterField","dataType","conditions","required","label","maxConditions","delegate","payload","dependents","getDependents","find","dependent","getId","includes","setValueHelp","addItem","p","Element","getElementById"],"sources":["JSONFilterBarDelegate.ts"],"sourcesContent":["import FilterBarDelegate from \"sap/ui/mdc/FilterBarDelegate\"\nimport JSONPropertyInfo from \"mdc/tutorial/model/metadata/JSONPropertyInfo\"\nimport FilterField from \"sap/ui/mdc/FilterField\"\nimport Element from \"sap/ui/core/Element\"\nimport {default as FilterBar, PropertyInfo as FilterBarPropertyInfo} from \"sap/ui/mdc/FilterBar\"\nimport Fragment from \"sap/ui/core/Fragment\"\nimport ValueHelp from \"sap/ui/mdc/ValueHelp\"\n\ninterface FilterBarPayload {\n\tvalueHelp: {\n\t\t[key:string]: string\n\t}\n}\n\nvar JSONFilterBarDelegate = Object.assign({}, FilterBarDelegate)\n\nJSONFilterBarDelegate.fetchProperties = async () => JSONPropertyInfo\n\nconst _createValueHelp = async (filterBar:FilterBar, propertyKey:string) => {\n\tconst path = \"mdc.tutorial.view.fragment.\"\n\tconst valueHelp = await Fragment.load({\n\t\tname: path + (filterBar.getPayload() as FilterBarPayload).valueHelp[propertyKey]\n\t}) as unknown as ValueHelp\n\tfilterBar.addDependent(valueHelp)\n\treturn valueHelp\n}\n\nconst _createFilterField = async (id:string, property:FilterBarPropertyInfo, filterBar:FilterBar) => {\n\tconst propertyKey = property.key\n\tconst filterField = new FilterField(id, {\n\t\tdataType: property.dataType,\n\t\tconditions: `{$filters>/conditions/${propertyKey}}`,\n\t\tpropertyKey: propertyKey,\n\t\trequired: property.required,\n\t\tlabel: property.label,\n\t\tmaxConditions: property.maxConditions,\n\t\tdelegate: {name: \"sap/ui/mdc/field/FieldBaseDelegate\", payload: {}}\n\t})\n\tif ((filterBar.getPayload() as FilterBarPayload).valueHelp[propertyKey] ) {\n\t\tconst dependents = filterBar.getDependents()\n\t\tlet valueHelp = dependents.find((dependent) => dependent.getId().includes(propertyKey)) as ValueHelp\n\t\tvalueHelp ??= await _createValueHelp(filterBar, propertyKey)\n\t\tfilterField.setValueHelp(valueHelp)\n\t}\n\treturn filterField\n}\n\nJSONFilterBarDelegate.addItem = async (filterBar:FilterBar, propertyKey:string) => {\n\tconst property = JSONPropertyInfo.find((p) => p.key === propertyKey) as FilterBarPropertyInfo\n\tconst id = `${filterBar.getId()}--filter--${propertyKey}`\n\tconst filterField = Element.getElementById(id) as FilterField\n\treturn filterField ?? _createFilterField(id, property, filterBar)\n}\n\nexport default JSONFilterBarDelegate"],"mappings":";;;;;;;;QACOA,gBAAgB,GAAAC,sBAAA,CAAAC,kBAAA;EAavB,IAAIC,qBAAqB,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEC,iBAAiB,CAAC;EAEhEH,qBAAqB,CAACI,eAAe,GAAG,YAAYP,gBAAgB;EAEpE,MAAMQ,gBAAgB,GAAG,MAAAA,CAAOC,SAAmB,EAAEC,WAAkB,KAAK;IAC3E,MAAMC,IAAI,GAAG,6BAA6B;IAC1C,MAAMC,SAAS,GAAG,MAAMC,QAAQ,CAACC,IAAI,CAAC;MACrCC,IAAI,EAAEJ,IAAI,GAAIF,SAAS,CAACO,UAAU,CAAC,CAAC,CAAsBJ,SAAS,CAACF,WAAW;IAChF,CAAC,CAAyB;IAC1BD,SAAS,CAACQ,YAAY,CAACL,SAAS,CAAC;IACjC,OAAOA,SAAS;EACjB,CAAC;EAED,MAAMM,kBAAkB,GAAG,MAAAA,CAAOC,EAAS,EAAEC,QAA8B,EAAEX,SAAmB,KAAK;IACpG,MAAMC,WAAW,GAAGU,QAAQ,CAACC,GAAG;IAChC,MAAMC,WAAW,GAAG,IAAIC,WAAW,CAACJ,EAAE,EAAE;MACvCK,QAAQ,EAAEJ,QAAQ,CAACI,QAAQ;MAC3BC,UAAU,EAAG,yBAAwBf,WAAY,GAAE;MACnDA,WAAW,EAAEA,WAAW;MACxBgB,QAAQ,EAAEN,QAAQ,CAACM,QAAQ;MAC3BC,KAAK,EAAEP,QAAQ,CAACO,KAAK;MACrBC,aAAa,EAAER,QAAQ,CAACQ,aAAa;MACrCC,QAAQ,EAAE;QAACd,IAAI,EAAE,oCAAoC;QAAEe,OAAO,EAAE,CAAC;MAAC;IACnE,CAAC,CAAC;IACF,IAAKrB,SAAS,CAACO,UAAU,CAAC,CAAC,CAAsBJ,SAAS,CAACF,WAAW,CAAC,EAAG;MACzE,MAAMqB,UAAU,GAAGtB,SAAS,CAACuB,aAAa,CAAC,CAAC;MAC5C,IAAIpB,SAAS,GAAGmB,UAAU,CAACE,IAAI,CAAEC,SAAS,IAAKA,SAAS,CAACC,KAAK,CAAC,CAAC,CAACC,QAAQ,CAAC1B,WAAW,CAAC,CAAc;MACpGE,SAAS,KAAK,MAAMJ,gBAAgB,CAACC,SAAS,EAAEC,WAAW,CAAC;MAC5DY,WAAW,CAACe,YAAY,CAACzB,SAAS,CAAC;IACpC;IACA,OAAOU,WAAW;EACnB,CAAC;EAEDnB,qBAAqB,CAACmC,OAAO,GAAG,OAAO7B,SAAmB,EAAEC,WAAkB,KAAK;IAClF,MAAMU,QAAQ,GAAGpB,gBAAgB,CAACiC,IAAI,CAAEM,CAAC,IAAKA,CAAC,CAAClB,GAAG,KAAKX,WAAW,CAA0B;IAC7F,MAAMS,EAAE,GAAI,GAAEV,SAAS,CAAC0B,KAAK,CAAC,CAAE,aAAYzB,WAAY,EAAC;IACzD,MAAMY,WAAW,GAAGkB,OAAO,CAACC,cAAc,CAACtB,EAAE,CAAgB;IAC7D,OAAOG,WAAW,IAAIJ,kBAAkB,CAACC,EAAE,EAAEC,QAAQ,EAAEX,SAAS,CAAC;EAClE,CAAC;EAAA,OAEcN,qBAAqB;AAAA","ignoreList":[]}